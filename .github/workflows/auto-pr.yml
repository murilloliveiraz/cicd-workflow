name: Auto PR to develop

on:
  push:
    branches-ignore:
      - main
      - develop

jobs:
  open-pr:
    runs-on: ubuntu-latest

    steps:
      - name: Create PR via GitHub API
        run: |
          BRANCH="${GITHUB_REF#refs/heads/}"

          echo "Criando PR de $BRANCH para develop..."

          gh api repos/${{ github.repository }}/pulls \
            -f title="Auto PR: $BRANCH → develop" \
            -f head="$BRANCH" \
            -f base="develop" \
            -f body="Pull request automática gerada pelo workflow." \
            || echo "PR já existe ou erro ignorável."

        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
